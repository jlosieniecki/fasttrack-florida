<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florida FAST Math Simulator (Ultimate Edition)</title>
    <style>
        /* --- 1. GLOBAL STYLES --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #f4f7f6; color: #333; }
        
        #dashboard { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .header { text-align: center; margin-bottom: 50px; }
        .header h1 { color: #005ea2; font-size: 36px; margin-bottom: 10px; }
        
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .card { background: white; border-radius: 8px; padding: 25px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; border-top: 5px solid #ccc; transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        
        /* Card Themes */
        .card.mock { border-top-color: #d9534f; border-left: 5px solid #d9534f; }
        .card.nso { border-top-color: #005ea2; }
        .card.fr { border-top-color: #5cb85c; }
        .card.ar { border-top-color: #f0ad4e; }
        .card.gr { border-top-color: #6f42c1; }

        /* --- 2. SIMULATOR VIEW --- */
        #simulator-view { display: none; min-height: 100vh; background-color: #f2f2f2; }
        
        #question-card {
            max-width: 900px; margin: 0 auto; padding: 50px; background: white;
            border-left: 1px solid #ccc; border-right: 1px solid #ccc; min-height: 600px;
            padding-bottom: 100px;
        }

        .question-stem { font-size: 22px; margin-bottom: 30px; line-height: 1.6; }
        .level-badge { display: inline-block; background: #333; color: white; padding: 2px 8px; font-size: 12px; border-radius: 4px; margin-bottom: 10px; }

        /* VISUALS */
        .visual-container { text-align: center; margin: 20px 0; padding: 20px; background: #fff; border: 1px solid #eee; }
        svg { max-width: 100%; height: auto; }

        /* INTERACTIVE ELEMENTS */
        .option-row { padding: 15px; border: 1px solid #ccc; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center; border-radius: 4px; font-size: 18px; }
        .option-row:hover { background-color: #e1f3f8; border-color: #005ea2; }

        .fast-table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 18px; }
        .fast-table th { border-bottom: 2px solid #000; padding: 15px; }
        .fast-table td { padding: 15px; border-bottom: 1px solid #ccc; text-align: center; }
        
        /* FOOTER */
        .fast-footer {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 80px;
            background-color: #e6e6e6; border-top: 1px solid #b3b3b3;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px; box-sizing: border-box; z-index: 100;
        }
        .nav-btn { font-size: 18px; padding: 12px 24px; border-radius: 4px; cursor: pointer; border: 1px solid #aaa; }
        .btn-next { background-color: #005ea2; color: white; border: none; font-weight: bold; }
    </style>
</head>
<body>

    <div id="dashboard">
        <div class="header">
            <h1>Florida FAST Math Simulator</h1>
            <p>Comprehensive Master Quizzes for Every B.E.S.T. Domain</p>
        </div>

        <div class="grid-container">
            <div class="card mock" onclick="startTest('mock')">
                <h3>üèÜ Full Mock Assessment</h3>
                <p><strong>30 Questions</strong> ‚Ä¢ All Domains</p>
                <p>A mix of every standard.</p>
            </div>

            <div class="card nso" onclick="startTest('NSO')">
                <h3>Number Sense (NSO)</h3>
                <p><strong>Master Quiz</strong></p>
                <p>Covers: Place Value, Decomposing, Rounding, Addition/Subtraction.</p>
            </div>
            <div class="card fr" onclick="startTest('FR')">
                <h3>Fractions (FR)</h3>
                <p><strong>Master Quiz</strong></p>
                <p>Covers: Unit Fractions, Equivalence, Comparing, Plotting.</p>
            </div>
            <div class="card ar" onclick="startTest('AR')">
                <h3>Algebraic Reasoning (AR)</h3>
                <p><strong>Master Quiz</strong></p>
                <p>Covers: Mult/Div, Patterns, Properties, Multi-step.</p>
            </div>
            <div class="card gr" onclick="startTest('GR')">
                <h3>Geometry & Data (GR)</h3>
                <p><strong>Master Quiz</strong></p>
                <p>Covers: Area, Perimeter, Time, Symmetry, Bar Graphs.</p>
            </div>
        </div>
    </div>

    <div id="simulator-view">
        <div id="question-card"></div>
        <div class="fast-footer" id="nav-controls">
            <button class="nav-btn" onclick="exitTest()" style="background: #ddd;">Exit</button>
            <div style="font-weight: bold; font-size: 18px;">Item <span id="q-num">1</span> of <span id="q-total">10</span></div>
            <button class="nav-btn btn-next" onclick="nextQuestion()">Next</button>
        </div>
    </div>

    <script>
        // --- GLOBAL STATE ---
        let currentQuestions = [];
        let currentIndex = 0;
        let userAnswers = [];

        // --- 1. SVG DRAWING TOOLS ---
        function drawClockSVG(h, m) {
            const hDeg=(h*30)+(m*0.5), mDeg=m*6;
            return `<svg width="150" height="150" viewBox="0 0 200 200"><circle cx="100" cy="100" r="90" fill="white" stroke="black" stroke-width="4"/><circle cx="100" cy="100" r="3"/><line x1="100" y1="100" x2="100" y2="50" stroke="black" stroke-width="6" transform="rotate(${hDeg} 100 100)"/><line x1="100" y1="100" x2="100" y2="30" stroke="black" stroke-width="4" transform="rotate(${mDeg} 100 100)"/></svg>`;
        }
        function drawBarGraphSVG(v1, v2) {
            return `<svg width="200" height="150" viewBox="0 0 200 150"><rect x="20" y="${140-(v1*10)}" width="40" height="${v1*10}" fill="#005ea2"/><rect x="80" y="${140-(v2*10)}" width="40" height="${v2*10}" fill="#5cb85c"/><line x1="10" y1="140" x2="150" y2="140" stroke="black"/><text x="30" y="150" font-size="12">A</text><text x="90" y="150" font-size="12">B</text></svg>`;
        }
        function drawCompositeSVG() {
            return `<svg width="200" height="150" viewBox="0 0 300 200"><path d="M50,50 L200,50 L200,100 L120,100 L120,150 L50,150 Z" fill="#e1f3f8" stroke="#005ea2" stroke-width="3"/><text x="125" y="40">6</text><text x="25" y="100">5</text><text x="210" y="80">3</text><text x="80" y="170">4</text></svg>`;
        }

        // --- 2. GENERATOR LIBRARY (Mapped to Standards) ---
        
        // --- NSO GENERATORS ---
        const nsoGenerators = [
            function nso_decomp() { // Skill: Decompose multiple ways
                const n = Math.floor(Math.random()*4000)+1000;
                return { type:'mc', text:`Select the way to decompose **${n}**.`, options:[`${Math.floor(n/100)} hundreds, ${n%100} ones`, `${Math.floor(n/1000)} hundreds, ${n%100} tens`, `${n} tens`] };
            },
            function nso_round() { // Skill: Rounding
                const n = Math.floor(Math.random()*800)+100;
                return { type:'mc', text:`Round **${n}** to the nearest 100.`, options:[Math.round(n/100)*100, Math.floor(n/10)*10, n+10, 1000] };
            },
            function nso_word() { // Skill: Word Form
                const n = 1250; 
                return { type:'mc', text:`Select the word form for **1,250**.`, options:['One thousand two hundred fifty', 'Twelve hundred five', 'One thousand two hundred five'] };
            },
            function nso_compare() { // Skill: Comparing
                return { type:'mc', text:`Select the correct statement.`, options:['4,200 > 4,020', '3,900 < 3,090', '1,500 = 1,050'] };
            }
        ];

        // --- FR GENERATORS ---
        const frGenerators = [
            function fr_unit() { // Skill: Unit Fractions
                return { type:'mc', text:`Which fraction represents 1 part of 8?`, options:['1/8', '8/1', '8/8'] };
            },
            function fr_equiv() { // Skill: Equivalence
                return { type:'mc', text:`Which fraction is equivalent to **1/2**?`, options:['3/6', '3/4', '2/5', '5/8'] };
            },
            function fr_compare() { // Skill: Compare same denom
                return { type:'mc', text:`Which is true?`, options:['3/8 < 5/8', '3/8 > 5/8', '3/8 = 5/8'] };
            }
        ];

        // --- AR GENERATORS ---
        const arGenerators = [
            function ar_pattern() { // Skill: Patterns
                return { type:'mc', text:`Identify the pattern: 3, 6, 9, 12...`, options:['Add 3', 'Multiply by 2', 'Add 6'] };
            },
            function ar_mult() { // Skill: Multiplication Property
                return { type:'mc', text:`Which shows the Distributive Property for 7 x 12?`, options:['(7x10) + (7x2)', '(7+10) x (7+2)', '7 x 1 x 2'] };
            },
            function ar_error() { // Skill: Error Analysis (Level 5)
                return { type:'mc', text:`Jon says 4x8=36. Is he correct?`, options:['No, 4x8=32', 'Yes', 'No, 4x8=24'] };
            }
        ];

        // --- GR GENERATORS ---
        const grGenerators = [
            function gr_time() { // Skill: Time
                return { type:'mc', text:`The clock shows 3:15. What time is it 30 mins later?`, visual: drawClockSVG(3,15), options:['3:45', '3:30', '4:00'] };
            },
            function gr_area() { // Skill: Area Composite
                return { type:'mc', text:`Find the area of the combined shape.`, visual: drawCompositeSVG(), options:['26 sq ft', '22 sq ft', '30 sq ft'] };
            },
            function gr_data() { // Skill: Bar Graphs
                return { type:'mc', text:`How many more in B than A? (Scale: 1 line = 1 unit)`, visual: drawBarGraphSVG(4, 9), options:['5', '4', '13'] };
            }
        ];


        // --- 3. TEST LOGIC ---
        function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

        function startTest(mode) {
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('simulator-view').style.display = 'block';
            currentQuestions = [];
            currentIndex = 0;
            
            // SELECT GENERATORS BASED ON MODE
            let gens = [];
            if (mode === 'NSO') gens = nsoGenerators;
            else if (mode === 'FR') gens = frGenerators;
            else if (mode === 'AR') gens = arGenerators;
            else if (mode === 'GR') gens = grGenerators;
            else if (mode === 'mock') gens = [...nsoGenerators, ...frGenerators, ...arGenerators, ...grGenerators];

            // Generate Questions (Cycle through the specific list to hit EVERY standard)
            // If Mock, pick 30 random. If Domain, run ALL its generators.
            const count = (mode === 'mock') ? 30 : gens.length * 2; // Run domain skills twice for practice
            
            for(let i=0; i<count; i++) {
                const gen = gens[i % gens.length]; // Cycle through generators
                currentQuestions.push(gen());
            }

            document.getElementById('q-total').innerText = currentQuestions.length;
            renderQuestion(0);
        }

        function renderQuestion(index) {
            currentIndex = index;
            const q = currentQuestions[index];
            const container = document.getElementById('question-card');
            document.getElementById('q-num').innerText = index + 1;

            let visual = q.visual ? `<div class="visual-container">${q.visual}</div>` : '';
            // Shuffle options for rendering
            let opts = q.options.map(o => `<div class="option-row" onclick="selectOption(this)"><div style="width:20px; height:20px; border:1px solid #333; border-radius:50%; margin-right:10px;"></div>${o}</div>`).join('');
            
            container.innerHTML = `<div class="question-stem">${q.text}</div>${visual}<div>${opts}</div>`;
        }

        function selectOption(el) {
            // Visual selection only for this demo
            document.querySelectorAll('.option-row').forEach(e => e.style.backgroundColor = 'white');
            el.style.backgroundColor = '#e1f3f8';
        }

        function nextQuestion() {
            if (currentIndex < currentQuestions.length - 1) renderQuestion(currentIndex + 1);
            else {
                document.getElementById('question-card').innerHTML = `<h2>Test Complete</h2><button class="nav-btn btn-next" onclick="location.reload()">Return Home</button>`;
                document.getElementById('nav-controls').style.display = 'none';
            }
        }
        
        function exitTest() {
            document.getElementById('simulator-view').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
        }

        window.onload = function() {
            document.getElementById('dashboard').style.display = 'block';
        };

    </script>
</body>
</html>
