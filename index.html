<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florida FAST Math Simulator (Grade 3)</title>
    <style>
        /* --- 1. CAMBIUM AUTHENTIC THEME --- */
        :root {
            --fast-bg: #f2f2f2;           /* Light grey background outside the card */
            --fast-card-bg: #ffffff;      /* White question paper */
            --fast-text: #000000;
            --fast-blue: #005ea2;         /* The official selection blue */
            --fast-hover: #e1f3f8;        /* Light blue hover state */
            --fast-border: #000000;       /* High contrast borders */
            --fast-grey-row: #f0f0f0;     /* Alternating table rows */
        }

        body {
            font-family: 'Verdana', 'Arial', sans-serif; /* Standard testing fonts */
            background-color: var(--fast-bg);
            margin: 0;
            padding-bottom: 100px; /* Space for the footer */
            color: var(--fast-text);
        }

        /* The "Paper" Area */
        #question-card {
            max-width: 900px;
            margin: 40px auto;
            background: var(--fast-card-bg);
            padding: 50px;
            border: 1px solid #ccc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        /* Question Stem Text */
        .question-stem {
            font-size: 22px;
            font-weight: normal; /* FAST uses normal weight, not bold, for stems */
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* --- 2. HOT TEXT STYLES --- */
        .hot-text-container {
            font-size: 24px;
            line-height: 2.5;
            padding: 20px;
            border: 1px solid #ddd; /* Container box often used in tests */
            border-radius: 4px;
        }

        .hot-spot {
            padding: 6px 12px;
            margin: 0 4px;
            border: 2px solid transparent; /* Invisible border prevents jumping */
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .hot-spot:hover {
            background-color: var(--fast-hover);
            border-color: #bcd6ed;
        }

        .hot-spot.selected {
            background-color: var(--fast-blue);
            color: white;
            border-color: var(--fast-blue);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* --- 3. TABLE MATCH STYLES --- */
        .fast-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 18px;
        }

        .fast-table th {
            background-color: #fff;
            border-bottom: 2px solid #000;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }

        .fast-table td {
            padding: 15px;
            border-bottom: 1px solid #ccc;
            text-align: center;
        }

        /* Zebra Striping */
        .fast-table tr:nth-child(even) { background-color: var(--fast-grey-row); }
        .fast-table tr:nth-child(odd) { background-color: #fff; }

        .fast-table .row-label {
            text-align: left;
            font-weight: bold;
            padding-left: 20px;
        }

        /* Custom Radio Button scaling */
        input[type="radio"].fast-radio {
            width: 24px;
            height: 24px;
            accent-color: var(--fast-blue);
            cursor: pointer;
        }

        /* --- 4. EQUATION EDITOR (KEYPAD) --- */
        .equation-display {
            width: 100%;
            max-width: 400px;
            height: 60px;
            border: 2px solid #333;
            font-size: 32px;
            padding: 10px;
            margin-bottom: 20px;
            background: #fff;
            display: flex;
            align-items: center;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
        }

        .keypad-btn {
            padding: 15px;
            font-size: 20px;
            background: #f8f9fa;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .keypad-btn:active { background: #e2e6ea; }
        .keypad-btn.action { background: #e1f3f8; border-color: #005ea2; color: #005ea2; }

        /* --- 5. FOOTER BAR --- */
        .fast-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background-color: #e6e6e6;
            border-top: 1px solid #b3b3b3;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            box-sizing: border-box;
            z-index: 100;
        }

        .nav-btn {
            font-size: 18px;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #aaa;
        }

        .btn-next {
            background-color: var(--fast-blue);
            color: white;
            border: none;
            font-weight: bold;
        }
        
        .btn-back { background-color: white; color: #333; }

    </style>
</head>
<body>

    <div id="question-card">
        </div>

    <div class="fast-footer">
        <button class="nav-btn btn-back" onclick="prevQuestion()">Back</button>
        <div style="font-weight: bold; font-size: 18px;">Item <span id="q-num">1</span> of 3</div>
        <button class="nav-btn btn-next" onclick="nextQuestion()">Next</button>
    </div>

    <script>
        // --- STATE MANAGEMENT ---
        let currentQuestionIndex = 0;
        const questions = [];

        // --- 1. GENERATE QUESTIONS (Authentic Logic) ---

        // MA.3.NSO.1.1 - Table Match
        function generateTableMatch() {
            const thousands = Math.floor(Math.random() * 9) + 1;
            const ones = Math.floor(Math.random() * 9) + 1;
            const fullNumber = (thousands * 1000) + ones; // e.g., 6004

            return {
                type: 'table_match',
                standard: 'MA.3.NSO.1.1',
                text: `The number is **${fullNumber.toLocaleString()}**. Match the value of the digits below.`,
                contextNumber: fullNumber,
                rows: [
                    { label: `The value of the digit ${thousands}`, id: 'r1' },
                    { label: `The value of the digit ${ones}`, id: 'r2' }
                ],
                columns: ["Thousands", "Hundreds", "Ones"]
            };
        }

        // MA.3.NSO.1.2 - Hot Text
        function generateHotText() {
            const target = Math.floor(Math.random() * 800) + 100; // e.g., 482
            
            return {
                type: 'hot_text',
                standard: 'MA.3.NSO.1.2',
                text: `Select the digit in the **tens** place.`,
                content: target.toString() // "482"
            };
        }

        // MA.3.FR.1.1 - Equation Editor
        function generateEquation() {
            return {
                type: 'equation',
                standard: 'MA.3.FR.1.1',
                text: "What fraction represents the shaded part? Use the keypad to enter your answer.",
                imagePlaceholder: "[ FRACTION IMAGE ]" // Placeholder for your SVG logic
            };
        }

        // Initialize Test
        questions.push(generateTableMatch());
        questions.push(generateHotText());
        questions.push(generateEquation());
        
        // --- 2. RENDERERS ---

        function renderQuestion(index) {
            const q = questions[index];
            const container = document.getElementById('question-card');
            document.getElementById('q-num').innerText = index + 1;
            
            let html = `<div class="question-stem">${q.text}</div>`;

            if (q.type === 'table_match') {
                html += renderTableMatchHTML(q);
            } else if (q.type === 'hot_text') {
                html += renderHotTextHTML(q);
            } else if (q.type === 'equation') {
                html += renderEquationHTML(q);
            }

            container.innerHTML = html;
        }

        // HTML Generator: Table Match
        function renderTableMatchHTML(q) {
            return `
                <div style="margin-bottom:20px; font-size:20px; background:#f9f9f9; padding:15px; border-left:4px solid var(--fast-blue);">
                    Reference Number: <strong>${q.contextNumber}</strong>
                </div>
                <table class="fast-table">
                    <thead>
                        <tr>
                            <th></th>
                            ${q.columns.map(col => `<th>${col}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
                        ${q.rows.map((row, rIdx) => `
                            <tr>
                                <td class="row-label">${row.label}</td>
                                ${q.columns.map(col => `
                                    <td>
                                        <input type="radio" name="row_${rIdx}" class="fast-radio" value="${col}">
                                    </td>
                                `).join('')}
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        // HTML Generator: Hot Text
        function renderHotTextHTML(q) {
            // Split "482" into ["4", "8", "2"]
            const digits = q.content.split('');
            return `
                <div class="hot-text-container">
                    ${digits.map((digit, i) => `
                        <span class="hot-spot" onclick="toggleHotSpot(this)">${digit}</span>
                    `).join('')}
                </div>
                <p style="color:#666; font-size:14px; margin-top:20px;">* Click the correct digit to select it.</p>
            `;
        }

        // HTML Generator: Equation Editor
        function renderEquationHTML(q) {
            return `
                <div style="margin-bottom:20px; padding:20px; border:1px dashed #ccc; text-align:center; color:#888;">
                    ${q.imagePlaceholder}
                </div>
                
                <div class="equation-display" id="eq-display"></div>
                
                <div class="keypad">
                    <button class="keypad-btn" onclick="typeKey('1')">1</button>
                    <button class="keypad-btn" onclick="typeKey('2')">2</button>
                    <button class="keypad-btn" onclick="typeKey('3')">3</button>
                    <button class="keypad-btn" onclick="typeKey('4')">4</button>
                    <button class="keypad-btn" onclick="typeKey('5')">5</button>
                    <button class="keypad-btn" onclick="typeKey('6')">6</button>
                    <button class="keypad-btn" onclick="typeKey('7')">7</button>
                    <button class="keypad-btn" onclick="typeKey('8')">8</button>
                    <button class="keypad-btn" onclick="typeKey('9')">9</button>
                    <button class="keypad-btn action" onclick="typeKey('/')">/</button>
                    <button class="keypad-btn" onclick="typeKey('0')">0</button>
                    <button class="keypad-btn action" onclick="backspace()">âŒ«</button>
                </div>
            `;
        }

        // --- 3. INTERACTION LOGIC ---

        // Hot Text Toggle
        function toggleHotSpot(el) {
            // For this specific question (single select), clear others first
            document.querySelectorAll('.hot-spot').forEach(s => s.classList.remove('selected'));
            el.classList.add('selected');
        }

        // Keypad Logic
        let currentEqValue = "";
        function typeKey(val) {
            currentEqValue += val;
            updateDisplay();
        }
        function backspace() {
            currentEqValue = currentEqValue.slice(0, -1);
            updateDisplay();
        }
        function updateDisplay() {
            document.getElementById('eq-display').innerText = currentEqValue;
        }

        // Navigation
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                currentEqValue = ""; // Reset calculator
                renderQuestion(currentQuestionIndex);
            } else {
                alert("End of Practice Test");
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                currentEqValue = "";
                renderQuestion(currentQuestionIndex);
            }
        }

        // Start
        renderQuestion(0);

    </script>
</body>
</html>
